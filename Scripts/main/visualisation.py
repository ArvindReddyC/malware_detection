import pandas as pd
import seaborn as sns 
import matplotlib.pyplot as plt
import numpy as np

def style_time(df):
  pivoted =  df.pivot(index=['clf','fs'] , columns= 'size' , values='model_time' )
  cm = sns.light_palette("green", as_cmap=True)
  return pivoted.style.background_gradient(cmap=cm ,subset = pivoted.columns )

def style_accuracy_col_wise(df):
  accuracies =  df.pivot( index=['clf','fs'] , columns= 'size' , values='accuracy' )
  #cm = sns.light_palette("green", as_cmap=True)
  return accuracies.style.highlight_max( subset =  accuracies.columns , axis= 0 , color = 'lightgreen' )

def style_accuracy_row_wise(df):
  accuracies =  df.pivot( index=['clf','fs'] , columns= 'size' , values='accuracy' )
  #cm = sns.light_palette("green", as_cmap=True)
  return accuracies.style.highlight_max( subset =  accuracies.columns , axis= 1 , color = 'lightgreen' )


def make_bar_graph( df , x , y  ):
  plt.figure( figsize=(x,y) ) 
  plt.bar( np.arange(1,len(df) + 1 ,1) , df , color = plt.cm.Dark2_r( np.arange(1,len(df) + 1,1) ) ) 
  plt.xticks(np.arange(1,len(df) + 1,1) , df.index )
  plt.ylim(87,93)
  plt.xlabel( 'Classifier'.upper() )  
  plt.ylabel( 'Accuracy'.upper() ) 
  plt.title( 'Accuracy when No feature Selection is applied'.upper() ) 

  for i,j in zip( np.arange(1,len(df) + 1,1) , df  ):
    plt.text( i, j * 1.001 , str(j) + '%' , ha = 'center' )
  return plt